<div class="row">
  <!-- Farm Info Form -->
  <div class="col-md-12">
    <form [formGroup]="farmInfo" class="step-container">
      <nb-card>
        <nb-card-header>1. Farm Info</nb-card-header>
        <nb-card-body>
          <div class="row">
            <div class="col-sm-12">
              <div class="form-group">
                <label for="batchId" class="label">Batch ID</label>
                <p>{{ newId }}</p>
              </div>
            </div>
            <div class="col-sm-6">
              <div class="form-group">
                <label for="farmName" class="label">Farm Name</label>
                <input
                  type="text"
                  nbInput
                  fullWidth
                  id="farmName"
                  formControlName="farmName"
                />
              </div>
            </div>
            <div class="col-sm-6">
              <div class="form-group">
                <label for="farmAddress" class="label">Farm Address</label>
                <input
                  type="text"
                  nbInput
                  fullWidth
                  id="farmAddress"
                  formControlName="farmAddress"
                  [status]="
                    farmInfo.get('farmAddress').invalid &&
                    farmInfo.get('farmAddress').touched
                      ? 'danger'
                      : 'basic'
                  "
                  (blur)="farmInfo.get('farmAddress').markAsTouched()"
                />
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col-sm-6">
              <div class="form-group">
                <label for="latitude" class="label">Latitude</label>
                <input
                  type="text"
                  nbInput
                  fullWidth
                  id="latitude"
                  formControlName="latitude"
                  disabled="true"
                />
              </div>
            </div>
            <div class="col-sm-6">
              <div class="form-group">
                <label for="longitude" class="label">Longitude</label>
                <input
                  type="text"
                  nbInput
                  fullWidth
                  id="longitude"
                  formControlName="longitude"
                  disabled="true"
                />
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col-sm-6">
              <div class="form-group">
                <label for="farmerName" class="label">Farmer Name</label>
                <input
                  type="text"
                  nbInput
                  fullWidth
                  id="farmerName"
                  formControlName="farmerName"
                />
              </div>
            </div>
            <div class="col-sm-6">
              <div class="form-group">
                <label for="farmerContact" class="label">Farmer Contact</label>
                <input
                  type="text"
                  nbInput
                  fullWidth
                  id="farmerContact"
                  formControlName="farmerContact"
                />
              </div>
            </div>
            <div class="col-sm-12">
              <div class="row">
                <div class="col-md-6">
                  <button (click)="getUserLocation()" nbButton>
                    Update Coordinates
                  </button>
                </div>
                <div class="col-md-6">
                  <nb-alert status="warning" *ngIf="isLatLongSameAsPrevious">
                    Location updated. No changes detected.
                  </nb-alert>
                </div>
              </div>
            </div>
          </div>
        </nb-card-body>
      </nb-card>
    </form>
  </div>

  <!-- Vineyard Details Form -->
  <div class="col-md-12">
    <form [formGroup]="vineyardDetails" class="step-container">
      <nb-card>
        <nb-card-header>2. Vineyard Details</nb-card-header>
        <nb-card-body>
          <div class="row">
            <div class="col-sm-6">
              <div class="form-group">
                <label for="vineyardId" class="label">Vineyard ID</label>
                <input
                  type="text"
                  nbInput
                  fullWidth
                  id="vineyardId"
                  formControlName="vineyardId"
                />
              </div>
            </div>
            <div class="col-sm-6">
              <div class="form-group">
                <label for="grapeVariety" class="label">Grape Variety</label>
                <input
                  type="text"
                  nbInput
                  fullWidth
                  id="grapeVariety"
                  formControlName="grapeVariety"
                />
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col-sm-6">
              <div class="form-group">
                <label for="plantingDate" class="label">Planting Date</label>
                <input
                  type="date"
                  nbInput
                  fullWidth
                  id="plantingDate"
                  formControlName="plantingDate"
                />
              </div>
            </div>
            <div class="col-sm-6">
              <div class="form-group">
                <label for="soilType" class="label">Soil Type</label>
                <input
                  type="text"
                  nbInput
                  fullWidth
                  id="soilType"
                  formControlName="soilType"
                />
              </div>
            </div>
          </div>
        </nb-card-body>
      </nb-card>
    </form>
  </div>

  <!-- Cultivation Practices Form -->
  <div class="col-md-12">
    <form [formGroup]="cultivationPractices" class="step-container">
      <nb-card>
        <nb-card-header>3. Cultivation Practices</nb-card-header>
        <nb-card-body>
          <div class="row">
            <div class="col-sm-6">
              <div class="form-group">
                <label for="irrigation" class="label">Irrigation</label>
                <input
                  type="text"
                  nbInput
                  fullWidth
                  id="irrigation"
                  formControlName="irrigation"
                />
              </div>
            </div>
            <div class="col-sm-6">
              <div class="form-group">
                <label for="fertilizationType" class="label"
                  >Fertilization Type</label
                >
                <input
                  type="text"
                  nbInput
                  fullWidth
                  id="fertilizationType"
                  formControlName="fertilizationType"
                />
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col-sm-6">
              <div class="form-group">
                <label for="fertilizationQuantity" class="label"
                  >Fertilization Quantity</label
                >
                <input
                  type="text"
                  nbInput
                  fullWidth
                  id="fertilizationQuantity"
                  formControlName="fertilizationQuantity"
                />
              </div>
            </div>
            <div class="col-sm-6">
              <div class="form-group">
                <label for="fertilizationDate" class="label"
                  >Fertilization Date</label
                >
                <input
                  type="date"
                  nbInput
                  fullWidth
                  id="fertilizationDate"
                  formControlName="fertilizationDate"
                />
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col-sm-6">
              <div class="form-group">
                <label for="pesticide" class="label">Pesticide</label>
                <input
                  type="text"
                  nbInput
                  fullWidth
                  id="pesticide"
                  formControlName="pesticide"
                />
              </div>
            </div>
            <div class="col-sm-6">
              <div class="form-group">
                <label for="pesticideApplicationDate" class="label"
                  >Pesticide Application Date</label
                >
                <input
                  type="date"
                  nbInput
                  fullWidth
                  id="pesticideApplicationDate"
                  formControlName="pesticideApplicationDate"
                />
              </div>
            </div>
            <div class="col-sm-12">
              <div class="form-group">
                <label for="compliance" class="label">Compliance</label>
                <input
                  type="text"
                  nbInput
                  fullWidth
                  id="compliance"
                  formControlName="compliance"
                />
              </div>
            </div>
            <div class="col-sm-12">
              <div class="form-group">
                <label for="pruning" class="label">Pruning</label>
                <input
                  type="text"
                  nbInput
                  fullWidth
                  id="pruning"
                  formControlName="pruning"
                />
              </div>
            </div>
          </div>
        </nb-card-body>
      </nb-card>
    </form>
  </div>

  <!-- Environmental Conditions Form -->
  <div class="col-md-12">
    <form [formGroup]="environmentalConditions" class="step-container">
      <nb-card>
        <nb-card-header>4. Environmental Conditions</nb-card-header>
        <nb-card-body>
          <div class="row">
            <div class="col-sm-6">
              <div class="form-group">
                <label for="weatherDate" class="label">Date</label>
                <input
                  type="date"
                  nbInput
                  fullWidth
                  id="weatherDate"
                  formControlName="weatherDate"
                />
              </div>
            </div>
            <div class="col-sm-6">
              <div class="form-group">
                <label for="temperature" class="label">Temperature</label>
                <input
                  type="text"
                  nbInput
                  fullWidth
                  id="temperature"
                  formControlName="temperature"
                />
              </div>
            </div>
            <div class="col-sm-6">
              <div class="form-group">
                <label for="rainfall" class="label">Rainfall</label>
                <input
                  type="text"
                  nbInput
                  fullWidth
                  id="rainfall"
                  formControlName="rainfall"
                />
              </div>
            </div>
            <div class="col-sm-6">
              <div class="form-group">
                <label for="humidity" class="label">Humidity</label>
                <input
                  type="text"
                  nbInput
                  fullWidth
                  id="humidity"
                  formControlName="humidity"
                />
              </div>
            </div>
          </div>
        </nb-card-body>
      </nb-card>
    </form>
  </div>

  <!-- Harvest Info Form -->
  <div class="col-md-12">
    <form [formGroup]="harvestInfo" class="step-container">
      <nb-card>
        <nb-card-header>5. Harvest Info</nb-card-header>
        <nb-card-body>
          <div class="row">
            <div class="col-sm-6">
              <div class="form-group">
                <label for="harvestDate" class="label">Harvest Date</label>
                <input
                  type="date"
                  nbInput
                  fullWidth
                  id="harvestDate"
                  formControlName="harvestDate"
                />
              </div>
            </div>
            <div class="col-sm-6">
              <div class="form-group">
                <label for="harvestMethod" class="label">Harvest Method</label>
                <input
                  type="text"
                  nbInput
                  fullWidth
                  id="harvestMethod"
                  formControlName="harvestMethod"
                />
              </div>
            </div>
            <div class="col-sm-12">
              <div class="form-group">
                <label for="laborDetails" class="label">Labor Details</label>
                <textarea
                  nbInput
                  fullWidth
                  id="laborDetails"
                  formControlName="laborDetails"
                ></textarea>
              </div>
            </div>
            <div class="col-sm-12">
              <div class="form-group">
                <label for="yield" class="label">Yield (KG)</label>
                <input
                  type="number"
                  nbInput
                  fullWidth
                  id="yield"
                  formControlName="yield"
                />
              </div>
            </div>
          </div>
        </nb-card-body>
      </nb-card>
    </form>
  </div>

  <!-- Post-Harvest Handling Form -->
  <div class="col-md-12">
    <form [formGroup]="postHarvestHandling" class="step-container">
      <nb-card>
        <nb-card-header>6. Post-Harvest Handling</nb-card-header>
        <nb-card-body>
          <div class="row">
            <div class="col-sm-12">
              <div class="form-group">
                <label for="remarks" class="label">Additional Remarks</label>
                <textarea
                  nbInput
                  fullWidth
                  id="laborDetails"
                  formControlName="remarks"
                ></textarea>
              </div>
            </div>
          </div>
        </nb-card-body>
      </nb-card>
    </form>
  </div>
</div>
<div class="button">
  <button (click)="onSubmit()" nbButton status="primary">Submit</button>
</div>
